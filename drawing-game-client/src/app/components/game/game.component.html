<div class="h-screen flex flex-col bg-gradient-to-br from-[#0f0617] via-[#1a0b2e] to-[#2d1b4e] overflow-hidden">
  <!-- Connection Status -->
  <div *ngIf="(connectionStatus$ | async) !== 'connected'" 
       class="fixed top-4 right-4 z-50 px-4 py-2 bg-[#FF8C00] text-white rounded-lg shadow-lg flex items-center space-x-2 animate-pulse">
    <svg class="w-4 h-4 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
    </svg>
    <span *ngIf="(connectionStatus$ | async) === 'connecting'">Connecting...</span>
    <span *ngIf="(connectionStatus$ | async) === 'disconnected'">Reconnecting...</span>
  </div>

  <!-- Header -->
  <div class="bg-[#1a0b2e] border-b border-[#5D3FD3] px-6 py-4 flex-shrink-0 shadow-lg">
    <div class="flex items-center justify-between">
      <div class="flex items-center space-x-4">
        <div class="flex items-center justify-center w-12 h-12 bg-gradient-to-br from-[#FF8C00] to-[#FFA500] rounded-lg shadow-md">
          <span class="text-2xl">ðŸŽƒ</span>
        </div>
        <div>
          <h1 class="text-xl font-bold text-[#FFD700]">Halloween Drawing Game</h1>
          <p class="text-sm text-[#FFA500]">Room: <span class="font-semibold text-[#FFD700]">{{ roomId }}</span></p>
        </div>
      </div>
      <div class="flex items-center gap-3">
        <div *ngIf="(roundNumber$ | async) as roundNumber" 
             class="px-4 py-2 bg-gradient-to-r from-[#5D3FD3] to-[#7B2CBF] text-white rounded-lg font-semibold shadow-md">
          Round {{ roundNumber }}
        </div>
        <button 
          (click)="leaveGame()"
          class="px-4 py-2 bg-[#FF8C00] hover:bg-[#FFA500] text-white rounded-lg font-semibold shadow-md transition-colors flex items-center gap-2">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
          </svg>
          Leave
        </button>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="flex-1 flex gap-4 p-4 overflow-hidden">
    <!-- Left Sidebar -->
    <div class="w-64 flex flex-col gap-4 flex-shrink-0">
      <app-player-list
        [players]="(players$ | async) || []"
        [drawerId]="(drawerId$ | async)"
      ></app-player-list>
      
      <app-scoreboard
        [players]="(players$ | async) || []"
        [scores]="(scores$ | async) || {}"
      ></app-scoreboard>
    </div>

    <!-- Center Area -->
    <div class="flex-1 flex flex-col gap-4 min-w-0">
      <!-- Prompt -->
      <div class="flex gap-4 flex-shrink-0">
        <div class="flex-1" *ngIf="(isDrawer$ | async)">
          <div class="h-full bg-gradient-to-r from-[#5D3FD3] to-[#7B2CBF] rounded-xl p-4 flex items-center justify-center shadow-lg border-2 border-[#FFD700]">
            <div class="text-center">
              <p class="text-[#FFD700] text-sm font-medium mb-1">ðŸŽ¨ Your word:</p>
              <p class="text-white text-2xl font-bold uppercase tracking-wider">{{ (currentPrompt$ | async) || '...' }}</p>
            </div>
          </div>
        </div>
        
        <div class="flex-1" *ngIf="!(isDrawer$ | async)">
          <div class="h-full bg-gradient-to-r from-[#FF8C00] to-[#FFA500] rounded-xl p-4 flex items-center justify-center shadow-lg border-2 border-[#FFD700]">
            <p class="text-white text-lg font-semibold">ðŸŽƒ Guess what is being drawn!</p>
          </div>
        </div>
      </div>

      <!-- Canvas -->
      <div class="flex-1 min-h-0 flex flex-col">
        <app-canvas
          [isDrawer]="(isDrawer$ | async) || false"
          (strokeDrawn)="onStrokeDrawn($event)"
          (toolChanged)="onToolChanged($event)"
          (canvasCleared)="onCanvasCleared()"
          class="h-full"
        ></app-canvas>
      </div>
    </div>

    <!-- Right Sidebar -->
    <div class="w-80 flex flex-col gap-4 flex-shrink-0">
      <div class="flex-1 min-h-0">
        <app-guess-feed [guesses]="(guesses$ | async) || []"></app-guess-feed>
      </div>
      <div class="flex-shrink-0">
        <app-guess-input
          [isDrawer]="(isDrawer$ | async) || false"
          (guessSubmitted)="onGuessSubmitted($event)"
        ></app-guess-input>
      </div>
    </div>
  </div>
</div>
